# Content-Expansion Skill 开发日志

## 2025-02-07

### v3.7 — 反结构化强化 + 参考文档瘦身

**问题描述**：v3.6 测试暴露两个核心问题：(1) 生成稿件中仍出现"首先XX，其次XX"和"XX方面"等结构化表述；(2) 4个 reference 文件合计 776 行，信号被噪声淹没。

**根因分析**：反结构化规则仅存在于 quality.md 的审校阶段（Step 5），AI 在创作阶段（Step 4）看不到这些规则。且替换表只做词级替换（"方面"→"这块"），AI 学会了换词但保留了枚举结构。

**解决方案**：

1. **SKILL.md** — Step 4 注入创作铁律检查点（STOP 机制），Step 5 强调反结构化搜索，Step 5.5 引用改为 platform-rules.md
2. **删除 output-format.md** — 内容与 platform-rules.md 完全重复
3. **quality.md** (185→129行) — 删除重复的五大铁律（已在 SKILL.md），反结构化从词级替换升级为段落级禁止（零容忍），5个审校分区压缩为1个扁平清单
4. **tone-guide.md** (199→100行) — 5个敷衍回答处理器合并为1个通用模板，删除已在 handover-protocol.md 的质量下降+交接话术，删除已在 SKILL.md 的人机共驾原则
5. **handover-protocol.md** (204→98行) — 多样化进度两表格压缩为单行格式，3个必答问题压缩为紧凑格式，3轮升级压缩为1轮，3个跳过处理器合并为1个通用
6. **diversity-matrix.md** (188→106行) — 删除 S1-S5 风格详解（与语料库文件+风格表重复），使用说明合并到分配规则

**总量变化**：907行 → ~533行（减少约 41%），删除1个文件

**验证结果**：待测试（Brief: 车型CR-V，平台今日头条，数量5篇，方向春节返乡+家庭用车）

---

## 2025-02-08

### v3.7 测试结果 — 同质化问题严重

**测试参数**：车型CR-V，平台今日头条，数量20篇

**严重问题**：
| 问题 | 出现频率 | 严重程度 |
|------|----------|----------|
| "但问题来了"句式重复 | 19/20篇 | 🔴 极其严重 |
| "说实话"重复 | 8篇 | 🟠 中等 |
| "你看"重复 | 6篇 | 🟠 中等 |

**根因分析**：

1. **模型缺陷（70%）**：
   - 上下文稀释：Skill文档+语料库+种子库叠加后，核心流程被稀释
   - 生成压力："完成感"驱动下跳过了关键步骤
   - 模式匹配：调用默认"长文生成"模式，而非严格按Skill步骤执行

2. **工作流程缺陷（30%）**：
   - Step 3→Step 4 缺乏用户确认门禁
   - Step 5 审校为可选动作，非强制阻塞
   - "开头变体库.md"和"观点句式库.md"的强制等级不够醒目
   - 缺乏自检清单的自动化约束

**执行缺陷复盘**：

- ❌ 未读取 `开头变体库.md`（句式多样性储备不足）
- ❌ 未读取 `观点句式库.md`（人话句式储备不足）
- ❌ 未执行 Step 5 批量审校（无自纠机制）
- ❌ 违反"3篇/批次"节奏（一次生成15篇）
- ❌ 未等用户确认即继续生成

**改进建议**：

1. 增加显性检查点（Checkpoint），每个Step结束前强制确认
2. 关键参考资料使用 🔴 **强制性门禁** 标记
3. 提供"最低限度执行清单"防遗漏
4. 预定义20个不同转折句式，每批次强制选择3个不同句式

**下一步行动**：明天继续处理，重点修复同质化问题

---

### v5.0 — Pipeline 三级流水线重构

**问题描述**：v3.4→v4.0 迭代仍未解决核心矛盾——单 Agent 同时承担策划、写作、审校、查重 4 个角色，Claude Opus 勉强能做，但 Kimi/Deepseek 执行时严重同质化且不遵循流程。

**根因分析**：

- 单 Agent context 过大（~5000字/篇），规则信号被稀释
- Writer 串行生成，后续篇幅受前文模式影响（AI 自我复制）
- 靠规则"提醒"模型不要重复，弱模型常忽略

**解决方案**：从"单 Agent 全包"改为"Pipeline 三级流水线"——代码编排 + 模型只写作。

**变更清单**：

| 操作 | 文件                            | 说明                                      |
| ---- | ------------------------------- | ----------------------------------------- |
| 重写 | `SKILL.md`                      | 从"全能指令"改为"编排调度器"（131→161行） |
| 新建 | `references/10-rules.md`        | 从 quality.md 精炼的 10 条可机械验证规则  |
| 新建 | `references/writer-prompt.md`   | Writer Agent 提示词模板，含占位符注入说明 |
| 新建 | `references/planner-prompt.md`  | Planner Agent 分配表生成指令 + JSON 格式  |
| 新建 | `references/reviewer-prompt.md` | Reviewer Agent 质检指令（硬性/软性分离）  |
| 保留 | 其余 6 个 references 文件       | 无修改                                    |

**架构变化**：

```
v4.0: 主Agent串行执行全部步骤（策划→写作→审校→输出）
v5.0: 主Agent编排 → Planner(分配表) → Writer×N(并行写作) → Reviewer(质检) → 输出
```

**预期效果**：

- Writer 并行 → 15篇从15-20分钟降至5-8分钟
- 单篇 context 从 ~5000字降至 ~1200字
- 物理隔离根治同质化（不靠规则提醒）
- 弱模型可执行（Writer 任务极简）

**验证计划**：冒烟测试（CR-V 5篇今日头条）→ 同质化对比 → 弱模型验证 → 压力测试（15篇）

---

## 2026-02-08

### v5.0 测试结果 — 流程遵循问题（跨模型复现）

**测试条件**：用多个模型（含国内模型）测试 20 篇今日头条

**问题**：换模型后仍复现相同偏差——批次违规、跳过审校、无交接、无审校报告。AI 自己复盘也承认偏离流程。

**根因分析**：

问题不在模型能力层，在编排架构层：

1. **门禁是"描述性"的，不是"阻塞性"的** — SKILL.md 用自然语言写"每 3 篇一批"、"校验通过后确认"，但这些对模型来说是"建议"而非"程序"。所有 LLM 都倾向于"一次做完"，因为 loss function 奖励完成任务、不奖励分步确认。
2. **编排者和执行者是同一个 Agent** — 主 Agent 既读规则又执行规则，有"自由裁量权"跳步。
3. **控制流写在提示词层，不在代码层** — 自然语言没有 `if/else/while` 的强制力。

结论：不是"规范不够详细"，是"规范写在了错误的层"。

---

### v5.1 — 硬编码门禁改造

**问题描述**：v5.0 Pipeline 架构正确（Planner/Writer/Reviewer 三级分离），但主 Agent 编排层缺乏强制门禁，导致跨模型复现流程偏差。

**解决方案**：方案 A — 在 SKILL.md 中将"描述性门禁"改为"阻塞性门禁"（强制 AskUserQuestion 工具调用作为物理断点）。

**变更清单**：

| 操作 | 位置          | 说明                                            |
| ---- | ------------- | ----------------------------------------------- |
| 新增 | SKILL.md 顶部 | `⛔ 执行铁律` 段落（4 条禁令）                  |
| 重写 | Step 3        | 加入 🚫 门禁：分配表确认（AskUserQuestion）     |
| 重写 | Step 4        | 伪代码批次循环 + 每批次 🚫 门禁 + 15 篇触发交接 |
| 重写 | Step 5        | 加入 🚫 门禁：审校报告确认（AskUserQuestion）   |
| 重写 | Step 6        | 加入 🚫 门禁：交接触发（AskUserQuestion）       |
| 删除 | Step 4        | 风格语料文件映射表（命名规则已自明）            |
| 删除 | 底部          | "人机共驾"段落（精神已融入执行铁律）            |

**行数变化**：161 行 → 136 行（减少 15%，加入 4 个门禁的同时反而更精简）

**核心设计思路**：

```
v5.0 门禁 = 路牌（告诉你该停，但不拦你）
v5.1 门禁 = 闸门（AskUserQuestion 物理阻断，不确认不放行）
```

**后续路径**：方案 A 验证失败（弱模型仍跳过 AskUserQuestion）→ 升级方案 B（Python orchestrator 脚本接管控制流）→ 最终目标：Web 前端（控制流由后端代码决定，模型只做"填空"）

**验证计划**：用最弱可用模型测试 5 篇头条，观察 4 个门禁是否全部被执行

---

### v5.1 Pipeline 测试结果

**测试参数**：CR-V 15 篇今日头条

**结果**：整体表现不错，同质化显著改善。但综合审查仍发现残留问题：

| 残留问题     | 表现                           |
| ------------ | ------------------------------ |
| 结尾金句相似 | 同批次多篇收尾句式雷同         |
| 数据堆砌     | 部分文章在同一段落密集罗列数据 |
| 叙事模板化   | 论证推进方式趋同               |

**根因分析**：

| 因素       | 权重 | 说明                                                   |
| ---------- | ---- | ------------------------------------------------------ |
| 语料不足   | 50%  | 每种风格仅2篇样本、无过渡句库、无结尾变体库 — 最大瓶颈 |
| 平台特性   | 30%  | AI 模型固有的生成模式偏好                              |
| 工作流缺陷 | 20%  | Writer prompt 缺少开头/过渡/结尾参考注入、无负约束追踪 |

---

### v5.2 — 同质化修复（语料扩充 + 工作流修补）

**问题描述**：v5.1 测试15篇整体不错，但残留同质化——结尾金句相似、数据堆砌、叙事模板化。根因：语料50% + 平台30% + 工作流20%。

**解决方案**：双线并行——语料扩充（交给 OpenClaw 自动化）+ 工作流修补（直接执行）。

#### Part A：OpenClaw 语料生产（已完成 ✅）

7 个指令文件 → 6 个产出文件，已全部放入项目：

| 产出文件 | 路径 | 内容规模 |
|---------|------|---------|
| `开头变体库.md` | `02-参考学习/风格语料库/` | 5类型 × 8变体 = **40个开头段落** |
| `过渡句库.md` | `02-参考学习/风格语料库/` | 4功能 × 8个 = **32个过渡句式** |
| `结尾变体库.md` | `02-参考学习/风格语料库/` | 5类型 × 6变体 = **30个结尾段落** |
| `叙事弧线模板.md` | `02-参考学习/风格语料库/` | 6结构 × 2模板 = **12个骨架模板** |
| `语料更新SOP.md` | `02-参考学习/风格语料库/` | 每周/双周/月度更新流程 |
| `语料生产-附件4-风格样本扩充.md` | `references/` | 5风格 × 增3篇 = **15篇头条新范文** |

#### Part B：工作流修补（已完成 ✅）

| 编号 | 文件                                                           | 变更                                                                                                                  |
| ---- | -------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| B1   | `references/writer-prompt.md`                                  | 添加4个新注入插槽：`{opening_samples}` `{transition_samples}` `{closing_samples}` `{banned_phrases}`，注入表新增4行   |
| B2   | `SKILL.md`                                                     | Step 4: 添加7-10注入项、style_sample轮换逻辑、批次状态追踪伪代码（used_openings/transitions/closings/banned_phrases） |
| B3   | `references/quality.md`                                        | "相邻10篇"→"相邻5篇"（与 reviewer-prompt.md 统一）；AI黑名单扩充"说实话"+"你看"                                       |
| B4   | `references/diversity-matrix.md`                               | 开头/结尾维度添加新语料库路径指向                                                                                     |
| B5   | `references/10-rules.md` + `quality.md` + `reviewer-prompt.md` | AI句式黑名单三处同步扩充                                                                                              |

#### 当前状态

- ✅ OpenClaw 语料生产完成，文件已就位
- ✅ 工作流修补已完成
- ⏳ **准备进入验证阶段**：工作流验证（5篇）→ 端到端验证（20篇）

---

### 文件清理

删除 `03-工作流工具/工作日志.md`（内容与 `.DEV_LOG.md` 大量重复，且"核心规则速查"推荐使用已被禁用的AI句式，留着是误导）。

数据模糊化速查表迁移至此：

| 精准表达（避免） | 口语化表达（推荐）                   |
| ---------------- | ------------------------------------ |
| 保值率60.27%     | 保值率排前列 / 换车时能多回血一两万  |
| 49.3%高强度钢    | 高强度钢占比接近一半                 |
| 980Mpa后防撞梁   | 防撞梁用的是潜艇级钢材               |
| 销量19万台       | 年销量近20万                         |
| 落地21万         | 20万出头                             |
| 油耗5.49L/100km  | 一箱油能跑近千公里 / 百公里5个油出头 |
| 首付4万月供5000  | 首付几万，月供覆盖公积金             |

---

_版本：v5.2（同质化修复）_
_更新：2026-02-08 → 2026-02-11_
_状态：语料生产完成 ✅ | 工作流修补完成 ✅ | 准备进入验证阶段 ⏳_

---

## 2026-02-11

### CRV抖音脚本创作反馈（文案部门）

**背景**：按 v5.1 Pipeline 生成 CRV 15篇抖音口播脚本，文案同事反馈内容存在严重偏差。

---

#### 反馈1：方向1和方向2路径错误

**问题描述**：
- 修复版文案直接讲参数（10气囊/保值率等），缺少春节出行场景铺垫
- 不符合Brief要求的"新春购车指南"和"春节出行情感"方向逻辑

**正确路径**（Brief要求）：
```
春节出行场景（感性切入）
    ↓
以前大包小裹返乡的不便 vs 现在开车的便利
    ↓
为什么选CR-V（车大、安全、省心）
    ↓
具体参数作为支撑（而非主角）
```

**示例对比**：

❌ **错误示例**（直接讲参数）：
> "10个安全气囊，前排正面2个、侧面2个、膝部2个..."

✅ **正确示例**（场景→对比→选车）：
> "以前春节返乡，大包小裹挤火车，老人家受累孩子哭闹...现在开车回家，CR-V空间大装得下年货，10气囊守护全家安全，省心又安心。"

---

#### 反馈2：内容太过直白

**问题描述**：
- 情感表达过于直接、沉重，缺乏文学性和画面感
- 像说明书而非情感共鸣

❌ **反面示例**：
> "父母年纪大了，孩子还小，万一遇到紧急情况，这10个气囊就是最后的保护。"

**问题**：
- 太直白、太沉重
- 缺乏含蓄和层次

✅ **改进方向**：
- 用场景暗示，而非直接陈述
- 用画面感代替直白描述
- 情感要含蓄、有层次

✅ **正面示例**：
> "后备箱里装满了给老人带的年货，后排父母正在闭目养神...这时候才明白，平安到家就是年。"

---

#### 反馈3：内容太过激进

**问题描述**：
- 部分文案语气过于犀利、负面
- 大过节的内容不够温和喜庆

❌ **问题内容**：
- "是智商税还是保命神器"
- "这不是买车，这是买教训"
- 过于绝对的对比和批判

✅ **改进方向**：
- 大过节的内容要温和、喜庆
- 避免负面词汇（套路、坑、骗等）
- 多用正面引导，少用负面批判

---

#### 反馈4：单一配置点不够有力

**问题描述**：
- 部分文案选择的单一配置点太轻，不会为此买车
- 用户不会为唱吧/LED大灯等单一配置买单

❌ **反面示例**（不要选这些作为单篇主角）：
- 唱吧/爱奇艺（娱乐配置太轻）
- LED大灯（太普通）
- 单一声控功能
- 90度车门（太细）

✅ **正确选择**（有力量的大维度）：

| 维度 | 有力卖点 |
|------|---------|
| **安全** | 10气囊+ACE车身（作为一个整体安全概念，不单讲） |
| **空间** | MM理念大空间、全家出行不拥挤 |
| **智能** | Honda SENSING 360+全套辅助（整套体验，非单一功能） |
| **省心** | 30年品质传承、全球1500万口碑、耐用可靠 |
| **保值** | 60.27%保值率+增配升值 |
| **舒适** | 内饰设计+人机工程（整合体验） |

**核心原则**：
- ❌ 不会为唱吧买车 → ✅ 但会为"全家出行安心"买车
- ❌ 不会为LED大灯买车 → ✅ 但会为"省心耐用"买车
- 单一配置 → 整合成"体验价值"

---

#### 内容创作黄金法则（更新版）

**结构公式**（方向1和方向2）：
```
【开头】春节场景感性切入（30-50字）
【中段】以前vs现在的对比（80-120字）
【转折】为什么选CR-V（大维度价值，非单一参数）（80-120字）
【结尾】情感升华+祝福（30-50字）
```

**内容调性**：
- ✅ 温和、喜庆、含蓄
- ✅ 场景化、画面感
- ✅ 大维度价值（安全/空间/省心）
- ❌ 直白、沉重
- ❌ 激进、负面
- ❌ 单一轻量配置

**参数使用原则**：
- 参数是支撑，不是主角
- 多个相关参数可以整合（如10气囊+ACE车身=安全）
- 轻量配置不单独成篇（唱吧/LED等）

---

#### 修复任务

- [ ] 重新规划15篇内容（按正确路径+大维度卖点）
- [ ] 整合轻量配置到大维度
- [ ] 调整语气（温和喜庆）
- [ ] 增加春节场景铺垫
- [ ] 避免直白描述

---

_版本：v5.2 + 内容修正_
_更新：2026-02-11_
_状态：收到文案反馈 | 待重新规划生成 ⏳_
