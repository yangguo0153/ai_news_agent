# Planner Agent 提示词

> 主 Agent 将需求摘要和 7 维定义注入后，单次调用 Planner 生成分配表。

---

## Prompt

```
# 任务

根据以下需求和 7 维模型，生成一张内容分配表（JSON 数组）。

## 需求摘要

- 车型: {car_model}
- 平台: {platform}
- 数量: {count} 篇
- 话题方向: {topics}
- 核心卖点优先级: {selling_points}

## 7 维模型定义

### 风格 (5种)
| ID | 风格 | 特征 |
|----|------|------|
| S1 | 犀利观点 | 制造冲突、反问、揭露 |
| S2 | 干货科普 | 数据堆砌、专业分析、拆解 |
| S3 | 幽默段子 | 反转、自嘲、抖包袱 |
| S4 | 生活观察 | 场景代入、共情、细节描写 |
| S5 | 真实测评 | 第三视角客观记录、体验流水账 |

### 角度 (6种)
| ID | 角度 | 切入点 |
|----|------|--------|
| A1 | 路人观察 | 旁观者视角 |
| A2 | 行业观察 | 从业者/分析师视角 |
| A3 | 专业对比 | 技术拆解、参数对比 |
| A4 | 场景实测 | 具体场景验证 |
| A5 | 数据说话 | 硬数据论证 |
| A6 | 成本算账 | 购车/用车成本分析 |

### 开头类型 (5种)
| ID | 类型 | 核心特征 |
|----|------|----------|
| H1 | 反问型 | 以问题开头 |
| H2 | 揭秘型 | 以行业内幕/真相开头 |
| H3 | 数据冲击型 | 以数据开头 |
| H4 | 场景切入型 | 以具体场景开头 |
| H5 | 反常识型 | 以常识的反面开头 |

### 论证结构 (6种)
| ID | 结构 | 展开方式 |
|----|------|----------|
| L1 | 数据先行→场景验证 | 先摆数据，再用场景证实 |
| L2 | 场景引入→数据佐证 | 先描述场景，再用数据支撑 |
| L3 | 对比法→结论 | 两方对比，自然得出结论 |
| L4 | 时间线→感受 | 按时间顺序展开 |
| L5 | 问答递进→观点 | 层层设问推进 |
| L6 | 单一深挖→收尾 | 聚焦一个点深入展开 |

### 收尾方式 (5种)
| ID | 方式 | 特征 |
|----|------|------|
| E1 | 开放提问 | 抛出问题让读者思考 |
| E2 | 建议型 | 给出明确建议 |
| E3 | 金句型 | 用一句有力的话收尾 |
| E4 | 数据回扣 | 回到开头数据做总结 |
| E5 | 场景呼应 | 回到开头场景 |

### 话题 — 从需求中的话题方向选取
### 核心数据点 — 从以下数据点池中选取:
{data_points_pool}

## 分配约束（必须全部满足）

1. 相邻 5 篇的 7 维组合不完全相同
2. 各维度分布均匀：每种风格/角度/开头/结构/收尾的使用次数差 ≤ 1
3. 同批次核心数据点不重复（数据点数不足时可重复，但相邻 3 篇不重复）
4. 话题方向按需求中的方向均匀轮换
5. **首句点题原则**：每篇 assigned topic 必须明确，Writer 首句必须直击该 topic，禁止绕弯子

## 输出要求

只输出 JSON 数组，不要其他文字。格式：

[
  {
    "id": 1,
    "style": "S1犀利观点",
    "angle": "A2行业观察",
    "topic": "春节返乡",
    "opening": "H4场景切入型",
    "structure": "L2场景引入→数据佐证",
    "data_point": "保值率",
    "closing": "E1开放提问"
  },
  ...
]
```

---

## 注入说明（供主 Agent 参考）

| 占位符               | 来源                             |
| -------------------- | -------------------------------- |
| `{car_model}`        | Brief 解析                       |
| `{platform}`         | Brief 解析                       |
| `{count}`            | Brief 解析                       |
| `{topics}`           | Step 2 用户确认的话题方向        |
| `{selling_points}`   | Step 2 用户确认的卖点优先级      |
| `{data_points_pool}` | 从种子库提取的所有可用数据点列表 |

## 主 Agent 校验（收到 Planner 输出后）

1. 解析 JSON，格式不合法则重试（最多 2 次）
2. 检查条数 = `{count}`
3. 检查各维度分布是否均匀（差 ≤ 1）
4. 检查相邻 5 篇无完全相同组合
5. 检查数据点去重约束
6. 全部通过后进入 Step 4
